{
  "provider": "openai",
  "model": "codex-mini-latest",
  "prompt": "What are the best trigger keywords and patterns for a skill auto-activation system in a Claude Code plugin? Context: We're building a UserPromptSubmit hook for the bluera-knowledge plugin that detects when users would benefit from learning about specific skills. The 5 skills are: (1) knowledge-search - how to query indexed library sources, (2) when-to-query - deciding between BK vs Grep/Read, (3) search-optimization - optimizing search parameters, (4) advanced-workflows - multi-tool orchestration, (5) store-lifecycle - managing knowledge stores. Key insight: if a user already uses BK terminology, they don't need the skill suggested. We want to catch users who SHOULD be using BK but don't know it exists.",
  "response": "Below is a bite‚Äësized ‚Äúpattern cookbook‚Äù you can drop into your `UserPromptSubmit` hook in the bluera‚Äëknowledge Claude Code plugin. The idea is simple:\n\n1. **Look for ‚Äúnatural‚Äù signals** that a user is trying to do something Blue‚ÄëKnowledge (BK) was built for, but  \n2. **Exclude** anyone already using BK lingo (e.g. ‚Äúknowledge‚Äësearch,‚Äù ‚Äúindex,‚Äù ‚Äústore,‚Äù ‚Äúworkflow‚Äù) so you don‚Äôt remind the experienced.\n\n---\n\n## 1. Skill¬†‚Üí Trigger‚Äëpatterns matrix\n\n| Skill                | What it is                                                                                   | Trigger patterns (if user text _contains_)                                                                                                     | Exclude if user text _contains_                        |\n|:---------------------|:---------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------|\n| **knowledge‚Äësearch** | How to query an indexed library of docs/sources.                                             | `\\b(find|lookup|search|get me|show me|where can i find)\\b.*\\b(docs|documentation|references?|articles?)\\b`                                       | `\\bknowledge[- ]search\\b|\\bindex(ed)?\\b|\\bstore\\b`       |\n| **when‚Äëto‚Äëquery**    | Deciding whether to use BK vs. grep/`read()` etc.                                             | `\\b(grep|read\\(\\)|scan files|open files manually|search local files)\\b|\\b(is there a better way)\\b`                                             | `\\bwhen[- ]to[- ]query\\b|\\bblue[- ]knowledge\\b`          |\n| **search‚Äëoptimization** | Tuning filters, relevance, context windows, metadata to get better hits.                   | `\\b(narrow|filter|refine|limit|boost|prioritize|sort)\\b.*\\b(results|hits|matches)\\b`                                                           | `\\bsearch[- ]optimization\\b|\\brelevance\\b|\\bcontext window\\b` |\n| **advanced‚Äëworkflows** | Chaining multiple tools/APIs, branching, retrieval‚Äëthen‚Äëgeneration, tool orchestration.      | `\\b(chain|pipeline|orchestrate|automate|workflow|multi[- ]step|multi[- ]tool)\\b`                                                               | `\\badvanced[- ]workflows\\b|\\btool orchestration\\b`       |\n| **store‚Äëlifecycle**   | Setting up/updating/archiving knowledge stores, versioning, pruning old info.               | `\\b(create|update|delete|archive|prune|version)\\b.*\\b(store|index|database|repository)\\b`                                                       | `\\bstore[- ]lifecycle\\b|\\bknowledge[- ]store\\b`          |\n\n---\n\n### 1.1. Example Regex snippets\n\n```js\n// snippet for knowledge-search\nconst KNOWLEDGE_SEARCH_RE = /\\b(?:find|lookup|search|get me|show me|where can i find)\\b.*\\b(?:docs|documentation|references?|articles?)\\b/i;\n\n// snippet for when-to-query\nconst WHEN_TO_QUERY_RE = /\\b(?:grep|read\\(\\)|scan files|open files manually|search local files)\\b|\\b(?:is there a better way)\\b/i;\n\n// snippet for store-lifecycle\nconst STORE_LIFECYCLE_RE = /\\b(?:create|update|delete|archive|prune|version)\\b.*\\b(?:store|index|database|repository)\\b/i;\n```\n\n---\n\n## 2. Putting it together in your hook\n\nBelow is a simplified example of how you might wire these patterns into a Claude Code `UserPromptSubmit` hook. You‚Äôll want to adjust the messaging and localization to taste.\n\n```js\n/**\n * bluera-knowledge UserPromptSubmit hook\n * Detect users who could benefit from Blue‚ÄëKnowledge skills.\n */\nexport async function onUserPromptSubmit(event, ctx) {\n  const text = event.prompt.text;\n\n  // quick bailout: if they already speak BK\n  const hasBKTerm = /\\bknowledge[- ]search\\b|\\bwhen[- ]to[- ]query\\b|\\bsearch[- ]optimization\\b|\\badvanced[- ]workflows\\b|\\bstore[- ]lifecycle\\b|\\bblue[- ]knowledge\\b/i.test(text);\n  if (hasBKTerm) return;\n\n  // mapping skill ‚Üí [pattern, user‚Äêfacing hint]\n  const SKILLS = [\n    {\n      name: \"knowledge-search\",\n      re: /\\b(?:find|lookup|search|get me|show me|where can i find)\\b.*\\b(?:docs|documentation|references?|articles?)\\b/i,\n      hint: \"üîç You can try using our **knowledge‚Äësearch** feature to query indexed docs‚Äîno manual grepping needed!\"\n    },\n    {\n      name: \"when-to-query\",\n      re: /\\b(?:grep|read\\(\\)|scan files|open files manually|search local files)\\b|\\b(?:is there a better way)\\b/i,\n      hint: \"üí° Noticed you're grepping or opening files one by one. Our **when‚Äëto‚Äëquery** guide helps decide BK vs. direct file search.\"\n    },\n    {\n      name: \"search-optimization\",\n      re: /\\b(?:narrow|filter|refine|limit|boost|prioritize|sort)\\b.*\\b(?:results|hits|matches)\\b/i,\n      hint: \"‚öôÔ∏è Want more relevant hits? See our **search‚Äëoptimization** tips for tuning relevance and filters.\"\n    },\n    {\n      name: \"advanced-workflows\",\n      re: /\\b(?:chain|pipeline|orchestrate|automate|workflow|multi[- ]step|multi[- ]tool)\\b/i,\n      hint: \"üîó Looking to chain tools or build pipelines? Check out **advanced‚Äëworkflows** for multi‚Äëtool orchestration.\"\n    },\n    {\n      name: \"store-lifecycle\",\n      re: /\\b(?:create|update|delete|archive|prune|version)\\b.*\\b(?:store|index|database|repository)\\b/i,\n      hint: \"üóÑÔ∏è Managing indexes or archiving old data? Our **store‚Äëlifecycle** guide covers store setup, pruning, and versioning.\"\n    }\n  ];\n\n  // find the first match\n  for (const skill of SKILLS) {\n    if (skill.re.test(text)) {\n      await ctx.reply({\n        type: \"skill-suggestion\",\n        skill: skill.name,\n        message: skill.hint\n      });\n      break;\n    }\n  }\n}\n```\n\n---\n\n## 3. Tuning tips\n\n1. **Balance precision/recall**:  \n   - Start _wide_: shorter patterns catch more but risk noise.  \n   - Refine as you gather real prompts: update regex to avoid false positives.\n\n2. **Avoid overlap**:  \n   If two patterns both match, pick the one that feels _most_ immediately helpful. (Above example picks the first.)\n\n3. **User‚Äëfacing copy**:  \n   Keep hints crisp, emoji‚Äëtagged, and link directly to your docs or `@help` commands.\n\n4. **Metrics & feedback loop**:  \n   Log suggestions shown vs. accepted. Tune patterns around low‚Äëacceptance hits.\n\n---\n\n### Summary\n\nBy combining simple regex‚Äëbased detectors with an exclusion of existing BK terminology, you‚Äôll catch ‚Äúhidden‚Äù use cases where users are laboring manually and would love a BK shortcut. Tweak patterns over time against your live traffic, and you‚Äôll have a reliable auto‚Äëactivation layer that boosts discoverability _without_ nagging your power users.",
  "timestamp": 1768432278
}
